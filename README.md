# SK-NET World Clock

## 프로젝트 목표

이 프로젝트는 해외 출장이나 글로벌 비즈니스를 하는 사람들을 위해 여러 도시의 시간을 한눈에 파악할 수 있는 웹 기반 세계 시계를 만드는 것을 목표로 합니다. 사용자는 이 시계를 통해 여러 도시의 시간을 동시에 확인하고, 특정 시간을 기준으로 다른 도시의 시간을 쉽게 계산할 수 있습니다.

## 핵심 기능

- **다중 도시 시간 표시**: 사용자가 선택한 여러 도시의 시간을 아날로그 시계 바늘로 동시에 표시합니다.
- **시간대(GMT) 기반 설정**: 각 도시의 GMT 오프셋을 설정하여 정확한 시간을 표시합니다.
- **시간 스크러빙**: 마우스 휠이나 드래그, 터치를 통해 시계 바늘을 돌려 특정 시점의 각 도시 시간을 확인할 수 있습니다.
- **로컬 시간 기준**: 사용자의 현재 시간(Local Time)을 기준으로 모든 도시의 시간이 표시됩니다.
- **도시 관리**: 도시 목록을 추가, 수정, 삭제하고 대표 도시를 설정하는 기능을 제공합니다.
- **PWA 지원**: 프로그레시브 웹 앱(PWA)으로 설치하여 네이티브 앱처럼 사용할 수 있습니다.

## v3 업데이트 내역

- **초기 로딩 안정성 개선**: 페이지 첫 로딩 시, 간혹 아날로그 시계가 상단 디지털 시계 영역을 침범하던 렌더링 버그를 수정했습니다. Flexbox 레이아웃 계산과 웹 폰트 로딩 시간차로 인해 발생하던 문제로, 모든 렌더링이 완료된 후 시계 크기를 재조정하여 해결했습니다.
- **개발 환경 개선 (Docker 설정 최적화)**: 개발 효율성을 위해 Docker 설정을 대폭 개선했습니다. 기존에는 코드를 수정할 때마다 Docker 이미지를 다시 빌드해야 했지만, 이제는 로컬의 `html` 폴더를 Nginx 컨테이너에 직접 마운트하는 방식을 사용합니다. 이로써 코드 변경사항이 저장 즉시 컨테이너에 반영되어, 웹페이지만 새로고침하면 되므로 개발 속도가 크게 향상되었습니다.
- **푸터 레이아웃 개선**: 앱 정보 및 아이콘(정보, 편집)의 정렬 방식을 개선하여 가독성을 높였습니다. 기존의 절대 위치 지정 방식 대신 Flexbox를 사용하여 중앙에 유연하게 정렬되도록 변경했습니다.
- **성능 및 안정성 개선**: 불필요한 GMT 오프셋 계산을 줄여 성능을 최적화하고, 특정 상황에서 버튼이 동작하지 않던 타이밍 관련 버그를 수정했습니다.
- **시간차 시각화 개선 및 성능 최적화**: 시간 조정 시, 시간 차이를 시계 테두리에 마커로 표시하던 기존 방식에서 성능 문제가 있었습니다. 이를 해결하기 위해, 수백 개의 DOM 요소를 생성하는 대신 CSS `conic-gradient`와 `mask`를 사용하는 단일 `div`로 변경했습니다. 이제 시간 차이는 시계 가장 바깥쪽 테두리를 따라 부드러운 '링' 형태로 그려지며, 성능이 크게 향상되었습니다.
- **아이콘 위치 변경**: 사용 편의성을 위해 정보(ℹ️) 및 편집(⚙️) 아이콘을 상단에서 하단 푸터 영역의 좌우로 이동시켰습니다.
- **레이아웃 개선**: 상단 및 하단 레이어의 높이와 정렬을 조정하고, 각 레이어 사이에 20px의 여백을 추가하여 시각적 균형을 개선했습니다.
- **회전 방향 아이콘 로직 변경**: 시계 중앙의 회전 방향 아이콘이 이제 마우스/터치 조작 방향이 아닌, 현재 시간과의 시간 차이(양수/음수)에 따라 표시되도록 로직을 변경했습니다.
- **시간 조정 복귀 기능**: 시간 조정 시, 시계 중앙에 마지막 회전 방향을 나타내는 원형 화살표(↩, ↪)가 나타납니다. 이 아이콘을 클릭하면 즉시 현재 시간으로 복귀하며, 아이콘과 시계판의 시간 차이 마커가 모두 사라집니다.
- **스마트폰 터치 조작**: 스마트폰에서 터치로 시계 바늘을 드래그하여 시간을 정밀하게 조정할 수 있습니다.
- **반응형 레이아웃 개선 (Safe Area 적용)**: 아이폰의 노치, 데스크톱 브라우저 등 다양한 환경에서 상/하단 콘텐츠가 잘리는 현상을 수정했습니다. CSS의 `max()`와 `env(safe-area-inset-*)`를 사용하여 어떤 기기에서든 최소 여백을 보장하고 시스템 UI를 자동으로 회피하도록 개선했습니다.
- **기본 도시 목록 변경**: 앱 초기 설정 시, `Seoul`을 포함한 6개의 커스텀 시간대(`BOSK-KY`, `BOSK-TN`, `SKBA`, `SKOH`, `SKOJ`, `SKOY`)가 기본 도시 목록으로 표시됩니다.
- **커스텀 시간대 유지**: `timezones.js` 파일에 포함된 6개의 커스텀 시간대가 앱 업데이트 시에도 유지되도록 설정되었습니다.

## v2 업데이트 내역

- **UI 아이콘 개선**: 정보(ⓘ) 및 편집(Edit) 버튼을 각각 아이콘(ℹ️, ⚙️)으로 변경하여 UI를 간소화했습니다.
- **상단 정보 레이아웃 개선**: 화면 상단의 디지털 시계 정보를 시간, 날짜, 도시 정보의 3열 구조로 명확하게 재배치하여 가독성을 높였습니다.
- **디지털 시계 초 표시**: 화면 상단 디지털 시계에 초(seconds)가 표시되도록 업데이트했습니다.
- **고정폭 폰트 적용**: 디지털 시계 숫자가 바뀌어도 전체적인 너비가 변하지 않도록 고정폭 폰트('Share Tech Mono')를 적용하여 안정적인 UI를 제공합니다.
- **시간 조정 방식 추가**: 마우스 휠 외에, 시계판을 직접 드래그하여 시간을 조정하는 기능을 추가했습니다.
- **날짜 변경 표시**: 다른 도시의 날짜가 대표 도시와 다를 경우, 시계 바늘에 `+1`, `-1`과 같이 날짜 차이를 표시합니다.
- **대표 도시 빠른 변경**: 다른 도시의 시계 바늘을 클릭하면 해당 도시가 즉시 대표 도시로 설정됩니다.

## 프로젝트 구조

- **`html/`**: 웹 서버가 직접 서빙하는 모든 정적 파일(HTML, CSS, JS, 아이콘 등)이 위치하는 폴더입니다.
  - **`index.html`**: 메인 HTML 파일.
  - **`style.css`**: 디자인과 레이아웃을 담당하는 CSS 파일.
  - **`script.js`**: 모든 동적 기능을 처리하는 JavaScript 파일.
  - **`timezones.js`**: 도시 및 IANA 시간대 정보가 담긴 파일.
  - **`manifest.json`**: PWA 설치를 위한 설정 파일.
  - **`icons/`**: 앱 아이콘들이 저장된 디렉토리.
- **`docker-compose.yml`**: Docker를 이용한 개발 환경 실행을 위한 설정 파일입니다. `nginx` 공식 이미지를 사용하며, 로컬의 `html` 폴더를 컨테이너 내부로 마운트하여 실시간 코드 변경을 지원합니다.
- **`screenshot/`**: 앱의 스크린샷 이미지를 보관하는 폴더입니다. (개발용)

## 상세 명세

### 아날로그 시계

- 24시간 형식의 아날로그 시계입니다.
- 시계 판에는 24시간을 나타내는 숫자와 15분 단위의 눈금이 표시됩니다.
- 각 도시는 하나의 시계 바늘으로 표시되며, 바늘 끝에 도시 이름이 표시됩니다.
- 대표 도시(isLocal=true)의 바늘은 녹색으로 강조 표시됩니다.
- 다른 도시의 바늘은 흰색으로 표시됩니다.

### 디지털 시계

- 화면 상단 중앙에 현재 대표 도시의 시간을 디지털 형식(HH:MM:SS)으로 표시합니다.
- 그 아래로 날짜와 요일, 도시 이름과 GMT 정보가 각각 다른 줄에 나뉘어 표시됩니다.

### 사용자 인터랙션

- **시간 조정**: 마우스 휠, 마우스 드래그, 그리고 스마트폰에서의 터치 드래그를 통해 시계 바늘을 돌려 시간을 정밀하게 조정할 수 있습니다.
- **도시 관리**:
  - 설정 아이콘(⚙️)을 눌러 도시 목록을 확인하고 관리할 수 있습니다.
  - 도시 추가, 수정, 삭제가 가능합니다.
  - 특정 도시를 '대표'로 설정하여 기준 시간으로 삼을 수 있습니다.
- **대표 도시 변경**: 다른 도시의 시계 바늘을 클릭하면 해당 도시가 즉시 대표 도시로 설정됩니다.
- **현재 시간으로 복귀**: 상단의 디지털 시계를 클릭하거나, 시간 조정 시 나타나는 중앙의 화살표 아이콘을 클릭하면 조정된 시간이 현재 시간으로 초기화됩니다.

### 시간차 시각화
- 시간 조정 시, 현재 시간과의 차이를 시계 가장자리 테두리를 따라 불투명한 색상 띠(ring)로 표시하여 직관성을 높였습니다. 이 방식은 CSS `conic-gradient`를 사용하여 높은 성능을 보장합니다.
- 시간 차이의 크기와 관계없이 양수 시간 차이는 노란색(`--time-diff-positive`), 음수 시간 차이는 마젠타색(`--time-diff-negative`)의 단일 색상으로 표시하도록 변수를 통일하여 코드를 단순화했습니다.

### 시간 차이 문자열 표시

- 사용자가 시계 바늘을 움직여 시간을 조정할 때, 대표 도시의 시계 바늘 아래에 현재 시간과의 차이를 표시하는 기능입니다.
- 시간 차이가 24시간 이상일 경우, `d`(day) 단위를 사용하여 `+1d 2h 30m`와 같이 표시됩니다.
- 이 문자열은 `script.js`의 `updateClocks` 함수 내에서 동적으로 생성되고 관리됩니다.
- `.time-diff-text` 클래스를 가진 `<span>` 요소로 구현되며, 대표 도시의 시계 바늘을 나타내는 `.local-hand` 요소의 자식인 `.city-on-hand` 요소에 추가됩니다.
- `style.css`의 `.time-diff-text` 클래스는 `position: absolute`와 `top: 70%` 등의 속성을 사용하여 문자열이 도시 이름 바로 아래에 위치하도록 합니다.
- 시간 차이가 양수일 경우와 음수일 경우, 각각 다른 색상으로 표시됩니다.
  - **+ 시간 차이**: `--time-diff-positive` CSS 변수 (밝은 노랑, `#FFD600`)
  - **- 시간 차이**: `--time-diff-negative` CSS 변수 (마젠타, `#FF00FF`)

## 구현 완료된 기능

- [x] 24시간 형식의 아날로그 시계판 구현
- [x] 다중 도시의 시간을 각기 다른 바늘로 표시
- [x] GMT 오프셋 기반의 시간 계산
- [x] 대표 도시 설정 및 시각적 구분 (녹색 바늘)
- [x] 마우스 휠/드래그/터치를 이용한 시간 스크러빙 기능
- [x] 도시 추가/수정/삭제 기능 (⚙️ 아이콘)
- [x] PWA 설치 지원
- [x] 시간 조정 시 차이를 시계 테두리에 색상 띠로 시각화하는 기능
- [x] 시간 조정 시 차이 `d`(day) 단위 표시
- [x] 디지털 시계 초 단위 표시
- [x] 디지털 시계 고정폭 폰트 적용
- [x] 상단 정보 3열 레이아웃(시간, 날짜, 도시) 적용
- [x] 다른 날짜의 도시에 날짜 차이 표시
- [x] 시계 바늘 클릭으로 대표 도시 변경


## v3 개발 계획 (진행중)

### 목표
- **서머타임(DST) 자동 적용**: 사용자가 직접 GMT 오프셋을 변경할 필요 없이, 앱이 자동으로 서머타임을 계산하여 정확한 시간을 표시합니다.
- **사용자 경험(UX) 개선**: 도시를 쉽게 찾고, 원하는 이름으로 저장할 수 있도록 도시 관리 기능을 대폭 개선합니다.

### 상세 구현 계획 (1단계 - 프론트엔드)

1.  **도시 데이터 분리 및 확장 (`timezones.js`):**
    -   전 세계 주요 도시 약 100개의 정보(도시명, IANA 시간대 이름)를 담은 `timezones.js` 파일을 생성하여 데이터를 코드와 분리합니다.

2.  **도시 데이터 구조 변경:**
    -   기존의 `gmt` 오프셋 기반 저장 방식에서, 서머타임 지원을 위해 `timezone` (IANA 시간대 이름) 기반으로 변경합니다.
    -   (예: `{ name: 'New York', gmt: -4 }` -> `{ name: 'LA Office', timezone: 'America/Los_Angeles' }`)

3.  **서머타임 자동 계산 로직:**
    -   브라우저의 `Intl` API를 사용하여, 각 도시의 `timezone`을 기준으로 현재 서머타임이 적용된 GMT 오프셋을 실시간으로 계산하는 함수를 구현합니다.

4.  **도시 관리 UI/UX 개편:**
    -   **도시 검색**: '도시 추가/수정' 시, 단순 텍스트 입력이 아닌 `timezones.js`의 목록을 기반으로 한 검색 및 자동완성 기능을 제공합니다.
    -   **커스텀 이름 설정**: 사용자가 시간대(예: `America/Los_Angeles`)를 선택한 후, 시계에 표시될 이름(예: "LA 오피스")을 자유롭게 지정할 수 있도록 합니다.
    -   **수동 입력**: 목록에 없는 시간대의 경우, 사용자가 IANA 시간대 이름을 직접 입력하여 추가할 수 있는 '고급 옵션'을 제공합니다.

### 향후 계획 (2단계 - 백엔드)
- 현재는 `timezones.js` 파일을 사용하지만, 향후 수만 개 이상의 도시를 지원하기 위해 백엔드 데이터베이스와 검색 API를 구축하여 확장할 수 있는 구조를 염두에 두고 개발합니다.

## 앞으로의 계획

- [ ] 테마 변경 기능 (라이트/다크 모드)
- [ ] 사용자 커스텀 설정 저장 기능 강화

---

*이 프로젝트는 LEE Youngeung에 의해 개발되었습니다.*
*문의: 20eung@gmail.com*


---

*This project was developed by LEE Youngeung.*
*Contact: 20eung@gmail.com*
